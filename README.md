# Универсальный Инструмент для Резервного Копирования

Комплексное Python-приложение для эффективного резервного копирования различных баз данных (MySQL, PostgreSQL, MSSQL) и локальных файлов. Предоставляет разнообразные варианты хранения (локальный диск, FTP, WebDAV) и надежное шифрование. Приложение оснащено удобным графическим интерфейсом для первоначальной настройки.

## Возможности

* **Резервное копирование баз данных:**
    * MySQL
    * PostgreSQL
    * MSSQL
* **Резервное копирование файлов:** Создание копий указанных локальных директорий и файлов.
* **Множественные места хранения:**
    * Локальный диск
    * FTP/FTPS
    * WebDAV
* **Сжатие и Шифрование Данных:** Защита ваших резервных копий с помощью ZIP-архивов, защищенных паролем, с использованием AES-шифрования.
* **Автоматическая Конфигурация:** Если файл конфигурации не найден, автоматически запускается графический интерфейс на основе Kivy для пошаговой настройки.
* **Детальное Логирование:** Подробное логирование в консоль и выделенный файл логов (`backup_app.log`) для удобного мониторинга и устранения неполадок.
* **Кроссплатформенность (Kivy GUI):** Графический интерфейс на Kivy потенциально обеспечивает кроссплатформенную совместимость.

## Начало Работы

Эти инструкции помогут вам запустить копию проекта на вашей локальной машине для использования в целях разработки и резервного копирования.

### Предварительные Требования

* Python 3.8+
* Для резервного копирования баз данных убедитесь, что соответствующие клиентские инструменты баз данных установлены и доступны в переменной среды PATH вашей системы (например, `mysqldump` для MySQL, `pg_dump` для PostgreSQL, `sqlcmd` для MSSQL).
* `pip` (установщик пакетов Python)

### Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone [https://github.com/c0untzer0nc/backuper.git](https://github.com/c0untzer0nc/backuper.git)
    cd backuper
    ```

2.  **Установите зависимости Python:**
    Настоятельно рекомендуется использовать виртуальное окружение.
    ```bash
    python -m venv venv
    # В Windows
    .\venv\Scripts\activate
    # В macOS/Linux
    source venv/bin/activate

    pip install -r requirements.txt
    ```
    *Примечание: Вам нужно будет создать файл `requirements.txt` на основе импортов в ваших скриптах. Основываясь на ваших `backup.py`, `conf_gui.py` и `init.py`, вот список наиболее вероятных зависимостей, которые вам понадобятся в `requirements.txt`:*

    ```
    kivy
    pyzipper
    webdav4
    pyodbc
    cryptography
    ```
    *(Вам также могут понадобиться `mysql-connector-python` или `psycopg2`, если они используются для прямого подключения к базам данных в других частях вашего кода, не видимых здесь, но вызовы `subprocess` для `mysqldump`/`pg_dump` обычно не требуют их для самого резервного копирования.)*

## Использование

Для запуска приложения просто выполните скрипт `init.py`:

```bash
python init.py
````

### Начальная Конфигурация

При первом запуске, если файл `backup_config.ini` не найден, приложение автоматически запустит графический пользовательский интерфейс (GUI), который поможет вам настроить параметры резервного копирования. Следуйте инструкциям на экране для настройки:

  * Общие параметры резервного копирования (например, директория для резервных копий).
  * Детали подключения к базам данных (MySQL, PostgreSQL, MSSQL).
  * Пути к файлам для резервного копирования.
  * Места хранения (Локальный, FTP, WebDAV) с соответствующими учетными данными.
  * Пароль для шифрования ваших архивов.

После сохранения конфигурации будет создан файл `backup_config.ini`.

### Выполнение Резервного Копирования

После первоначальной настройки последующие запуски `python init.py` будут:

1.  Проверять наличие файла `backup_config.ini`.
2.  Если файл найден, продолжать выполнять процессы резервного копирования, определенные в конфигурации.
3.  Каждый включенный тип резервного копирования (MySQL, PostgreSQL, MSSQL, Файлы) будет выполняться последовательно, создавая архивы и загружая их в настроенные места хранения.

Подробная информация о процессе резервного копирования, включая успехи, предупреждения и ошибки, будет отображаться в консоли и записываться в файл логов.

## Конфигурация

Настройки приложения управляются через файл `backup_config.ini`. Этот INI-стиль конфигурации хранит все параметры, включая чувствительную информацию, такую как пароли (которые шифруются внутри файла). Вы можете изменять этот файл вручную (с осторожностью, особенно для зашифрованных полей) или использовать GUI.

Пример структуры (упрощенно):

```ini
[General]
Backup_Path = C:\Backups
Log_Level = INFO

[MySQL_Backup]
enabled = True
Host = localhost
User = root
Password = encrypted_password_here
Databases = db1,db2
# ... другие настройки MySQL

[FTP_Storage]
enabled = True
Host = ftp.example.com
User = ftpuser
Password = encrypted_password_here
# ... другие настройки FTP
```

## Структура Файлов

  * `init.py`: Основная точка входа в приложение. Проверяет наличие файла конфигурации и запускает либо GUI, либо процесс резервного копирования.
  * `conf_gui.py`: Содержит логику Kivy-приложения для графического интерфейса настройки.
  * `backup.py`: Содержит основную логику резервного копирования, включая функции для дампов баз данных, архивирования файлов, сжатия, шифрования и загрузки в различные типы хранилищ.
  * `backup_config.ini`: (Создается) Файл конфигурации для приложения.
  * `backup_app.log`: (Создается) Файл логов, в котором записываются все действия приложения.

## Логирование

Приложение ведет логирование своей работы в файл `backup_app.log`, а также выводит информацию в консоль. Это помогает отслеживать ход выполнения бэкапов и диагностировать возможные проблемы.

## Лицензия

[GNU General Public License v2.0](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html)


